{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "..\\..\\src\\Alumnos.svelte"
  ],
  "sourcesContent": [
    "<script>\r\n  import { FirebaseApp, User, Doc, Collection } from \"sveltefire\";\r\n  import firebase from \"firebase/app\";\r\n  import \"firebase/firestore\";\r\n  import \"firebase/auth\";\r\n  import \"firebase/performance\";\r\n  import \"firebase/analytics\";\r\n \r\n /* variables de formulario  */\r\nconst db = firebase.firestore();\r\nconst user = firebase.auth();\r\nlet clase ='';\r\nlet alumnos = [];\r\nlet nombre = '';\r\nlet aulas = [];\r\nlet selected;\r\n\r\n\r\n/* cantidad de registros para la paginacion */\r\nlet page = 100;\r\nlet countTotal;\r\nlet firstReg = null;\r\n\r\n  db.collection(\"alumnos\").orderBy('created', 'desc').get().then(res => {\r\n    countTotal = res.size;\r\n    //console.log(res.size)\r\n  })\r\n\r\n\r\n/* Bloquear btn next-back */\r\nlet turnOffBtnAtras = true;\r\nlet turnOffBtnSiguiente = false;\r\nlet arr=[];\r\n/* Pagination */\r\nlet query = (ref) => ref.orderBy('created', 'desc').limit(page);\r\n\r\nfunction nextPage(last) {\r\n  turnOffBtnAtras = false;\r\n\tquery = (ref) => ref.orderBy('created', 'desc')\r\n\t\t\t  .startAfter(last['created'])\r\n              .limit(page);\r\n          //console.log(last.ref.id)\r\n          arr.splice(0,0,last.ref.id)\r\n        if (((arr.length*page)+page) > countTotal || ((arr.length*page)+page) === countTotal ){\r\n          turnOffBtnSiguiente = true;\r\n        }\r\n    }\r\n\r\nfunction prevPage(first) {\r\n  turnOffBtnSiguiente = false;\r\n  arr.splice(0, 1);\r\n\tquery = (ref) => ref.orderBy('created', 'desc')\r\n\t\t\t  .endBefore(first['created'])\r\n              .limitToLast(page);\r\n        //console.log((arr.length*5)+page)\r\n        if (((arr.length*page)+page) === page ){\r\n          turnOffBtnAtras = true;\r\n        }\r\n  }\r\n/* End Pagination */\r\n\r\n/* cargar drop aulas */\r\ndb.collection('aulas').orderBy('nombre','asc').onSnapshot(data =>{\r\n    aulas = data.docs\r\n})\r\n/* Agregar alumnos */\r\nconst addAlumnos = async(u) => {\r\n    const created =  new Date().getTime()\r\n    const user = u;\r\n    await db.collection('alumnos').add({ created, clase ,nombre, user }).then(resp=>{\r\n    clase = ''\r\n    nombre = ''\r\n    console.log(\"Alumnos agregado con Ã©xito\")\r\n  })\r\n}\r\n\r\n/* Search in table */\r\nimport {myFunction} from \"./table.js\";\r\n\r\n\r\n/* Print pdf  */\r\nconst Pdf = () => {\r\n    const doc =  new jsPDF('p', 'pt', 'letter');\r\n    doc.autoTable({ html: '#tabla' })\r\n    doc.save('alumnos.pdf')\r\n}\r\n\r\nlet data=[];\r\n\r\n</script>\r\n \r\n <!-- Style tag a -->\r\n<style>\r\na.disabled {\r\n    pointer-events: none;\r\n    color: #ccc;\r\n}\r\n\r\n</style>\r\n\r\n<svelte:head>\r\n  <title>Alumnos</title>\r\n  <script src=\"https://unpkg.com/jspdf@1.5.3/dist/jspdf.min.js\"></script>\r\n  <script src=\"https://unpkg.com/jspdf-autotable@3.5.3/dist/jspdf.plugin.autotable.js\"></script>\r\n</svelte:head>\r\n\r\n<div class=\"uk-section uk-section-primary\">\r\n  <div class=\"uk-container\">\r\n\r\n    <h1>\r\n      <span uk-icon=\"icon: users; ratio: 2\" />\r\n      Alumnos\r\n    </h1>\r\n\r\n  </div>\r\n</div>\r\n    <!-- End -->\r\n \r\n\r\n<!-- Start Alumnos -->\r\n\r\n<div class=\"uk-container uk-container-expand uk-margin-top\">\r\n\r\n<FirebaseApp {firebase} perf analytics>\r\n<User persist={sessionStorage} let:user={user} let:auth={auth} on:user>\r\n\r\n\r\n\r\n<!-- Regilla de  formulario y Buscador -->\r\n<div class=\"uk-child-width-expand@s uk-text-center\" uk-grid>\r\n    <div>\r\n               <!-- Formualrio Alumnos -->\r\n        <form on:submit|preventDefault={()=>{addAlumnos(user.uid)}}>\r\n            <select class=\"uk-select\" id=\"form-stacked-select\" bind:value={clase} on:change=\"{() => selected = ''}\">\r\n            <option value=\"\">Seleccione el aula</option>\r\n                {#each aulas as items}\r\n                    <option value={items.id}>{items.data().nombre}</option>\r\n                {/each}\r\n            </select>\r\n             <div class=\"uk-margin\">\r\n                <input class=\"uk-input uk-form-width-large\" disabled={!clase} type=\"text\" bind:value={nombre} placeholder=\"Nombre del alumno\">\r\n            </div>\r\n            <button class=\"uk-button uk-button-primary\" disabled={!nombre} >AGREGAR</button>\r\n        </form>\r\n\r\n    </div>\r\n    <div>\r\n        <!-- Centre -->\r\n\r\n    </div>\r\n    <div>\r\n        <!-- Right -->\r\n\r\n    </div>\r\n</div>\r\n<hr>\r\n            <!-- Search and btn -->          \r\n<form class=\"uk-search uk-search-navbar\">\r\n    <span uk-search-icon></span>\r\n    <input class=\"uk-search-input\" type=\"search\" on:keyup={myFunction} placeholder=\"Buscar alumno...\" id=\"buscar\">\r\n</form>\r\n               \r\n<hr>\r\n\r\n<Collection path={'alumnos'} {query} let:data let:first let:last>\r\n\r\n<div slot=\"loading\"><div uk-spinner></div></div>\r\n\r\n\r\n<div class=\"uk-overflow-auto\">\r\n<table class=\"uk-table uk-table-striped uk-table-condensed uk-text-nowrap\" id=\"tabla\">\r\n<caption><a href=\"javascript:void(0)\" uk-icon=\"file-pdf\" on:click={Pdf} uk-tooltip=\"title: Gruadar PDF; pos: bottom\" >  </a></caption>\r\n    <thead>\r\n    <tr>\r\n        <th class=\"uk-table-shrink\">Aula</th>\r\n        <th class=\"uk-table-expand\">Alumno</th>\r\n        <th class=\"uk-table-shrink\" colspan=\"2\">Opciones</th>\r\n    </tr>\r\n    </thead>\r\n    <tbody>\r\n    {#each data as alumno}\r\n    <tr>\r\n        <td class=\"uk-table-shrink\">\r\n      <div uk-form-custom=\"target: > * > span:first-child\">\r\n        <select bind:value={alumno.clase} on:change=\"{() => selected = ''}\">\r\n            {#each aulas as aula}\r\n                {#if alumno.clase == aula.data().nombre }\r\n                    <option value=\"{aula.id}\" selected >{aula.data().nombre}</option>\r\n                {:else}\r\n                    <option value=\"{aula.id}\" >{aula.data().nombre}</option>\r\n                {/if}\r\n            {/each} \r\n        </select>\r\n        <button class=\"uk-button uk-button-default\" type=\"button\" tabindex=\"-1\">\r\n            <span></span>\r\n            <span uk-icon=\"icon: chevron-down\"></span>\r\n          </button>\r\n        </div>\r\n        </td>\r\n        <td class=\"uk-table-expand\"><input class=\"uk-input uk-form-width-large\" bind:value={alumno.nombre} type=\"text\" placeholder={alumno.nombre}></td>\r\n        <td><a href=\"javascript:void(0)\" uk-tooltip=\"title: Editar\" on:click={()=>alumno.ref.update({ clase:alumno.clase ,nombre:alumno.nombre }).then(resp=>{\r\n          //console.log(\"Registro actualizado correctamente\")\r\n          UIkit.notification({message: \"<span uk-icon='icon: pencil'></span> Registro actualizado.\", pos: 'bottom-center', status: 'primary'})\r\n          })} uk-icon=\"pencil\"> </a></td>\r\n        <td><a href=\"javascript:void(0)\" uk-tooltip=\"title: Eliminar\" on:click={()=>alumno.ref.delete().then(resp=>{\r\n          //console.log(\"Registro eliminado\")\r\n          UIkit.notification({message: \"<span uk-icon='icon: trash'></span> Registro eliminado.\", pos: 'bottom-center', status: 'danger'})\r\n          })} uk-icon=\"trash\"> </a></td>\r\n    </tr>\r\n    {/each}\r\n    </tbody>\r\n</table>\r\n</div>\r\n\r\n<ul class=\"uk-pagination\">\r\n    <li><a class={turnOffBtnAtras ? \"disabled\" : ''} uk-tooltip=\"title: atras..; pos: bottom\" href=\"javascript:void(0)\" on:click={() => prevPage(first) } ><span uk-pagination-previous></span> Atras</a></li>\r\n    <li class=\"uk-margin-auto-left\" ><a class={turnOffBtnSiguiente ? \"disabled\" : ''} uk-tooltip=\"title: siguiente..; pos: bottom\" href=\"javascript:void(0)\" on:click={() => nextPage(last) } >Siguiente <span uk-pagination-next></span></a></li>\r\n</ul>\r\n</Collection>\r\n\r\n</User>\r\n</FirebaseApp>\r\n\r\n</div><!-- end container  -->\r\n<div class=\"uk-grid-match uk-grid-small uk-text-center\" uk-grid>\r\n    <div class=\"uk-width-1-12@m\">\r\n        <div class=\"uk-card uk-card-default uk-card-body\"><a href=\"#\" uk-totop uk-scroll> </a></div>\r\n    </div>\r\n</div>"
  ],
  "names": [],
  "mappings": "AA6FA,CAAC,SAAS,cAAC,CAAC,AACR,cAAc,CAAE,IAAI,CACpB,KAAK,CAAE,IAAI,AACf,CAAC"
}